# 总结

**1. 封装ajax过程(简单请求的ajax)**

* 创建XMLHttpRequest对象，要做兼容性处理(IE：ActiveXObject('Microsoft. XMLHttp'))

* 根据不同的方法(GET POST HEAD)建立连接并发送请求

    -  建立连接xhr.open(method, url, data, isAsync)

    -  发送请求xhr.send()

* 监听是否有响应：readyState 取值1-4

    - 绑定事件：xhr.onreadystatechange

    - readyState == 4:表示后台已经给出响应信息了

    - xhr.status == 200:状态码为200表示正常的返回了响应信息 

**2. 在向页面渲染div.item之前要找到最短的li**

* 获取元素尺寸的两种方法

    - dom.getBoundingClientRect()

    - dom.offsetHeight/Width

**3.  懒加载**

* 滚动条滚动距离

    - window.pageXOffset/pageYOffset 
        - IE8及IE8以下不兼容

    - document.documentElement/body.scrollLeft/scrollTop 
        - IE8及IE8能用
        
        - 但会出现**兼容性混乱**的问题，具体哪个浏览器用body哪个用documentElement无定论，但是当其中一个为0另一个一定为1

* 视口大小

    - window.innerWidth/innerHeight 
        - IE8及IE8不兼容
        - 加上滚动条宽高

    - document.documentElement.clientWidth/Height
        - 标准模式下，任意浏览器都兼容

    - document.body.clientWidth/Height
        - 适用于怪异模式下的浏览器